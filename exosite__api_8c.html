<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>ExositeReady SDK: src/exosite_api.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="EXOSITE-ready.logo-sheet.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ExositeReady SDK
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('exosite__api_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">exosite_api.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file implements the Exosite API calls.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;<a class="el" href="type_8h_source.html">lib/type.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="error_8h_source.html">lib/error.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">lib/debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sf__malloc_8h_source.html">lib/sf_malloc.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mem__check_8h_source.html">lib/mem_check.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="string__class_8h_source.html">lib/string_class.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="pclb_8h_source.html">lib/pclb.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="concurrent__queue_8h_source.html">lib/concurrent_queue.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="dictionary_8h_source.html">lib/dictionary.h</a>&gt;</code><br />
<code>#include &lt;lib/fault_injection.h&gt;</code><br />
<code>#include &lt;porting/thread_port.h&gt;</code><br />
<code>#include &lt;porting/net_port.h&gt;</code><br />
<code>#include &lt;porting/system_port.h&gt;</code><br />
<code>#include &lt;<a class="el" href="system__utils_8h_source.html">system_utils.h</a>&gt;</code><br />
<code>#include &lt;client_config.h&gt;</code><br />
<code>#include &lt;<a class="el" href="server__api_8h_source.html">server_api.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="protocol__client__sm_8h_source.html">protocol_client_sm.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="exosite__api__internal_8h_source.html">exosite_api_internal.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="exosite__api_8h_source.html">exosite_api.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsm__list__item.html">sm_list_item</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structexosite__class.html">exosite_class</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsubscribe__item.html">subscribe_item</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4220bc598405e83e01ca79c3d99d7392"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4220bc598405e83e01ca79c3d99d7392"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARG_SIZE</b>(arg)          &#160;&#160;&#160;((arg)?strlen(arg)+1:0)</td></tr>
<tr class="separator:a4220bc598405e83e01ca79c3d99d7392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed3bf6494ca3c829e8708c343459ebc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaed3bf6494ca3c829e8708c343459ebc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARG_CPY</b>(to,  from)    &#160;&#160;&#160;((from)?(strcpy((to), (from))):(to = NULL))</td></tr>
<tr class="separator:aaed3bf6494ca3c829e8708c343459ebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63bfde46de7b2630517ca0cbadc2069"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad63bfde46de7b2630517ca0cbadc2069"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TIMEOUT_STR_SIZE</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ad63bfde46de7b2630517ca0cbadc2069"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abca7bdbb52f87b7733c680b1ac64bca5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abca7bdbb52f87b7733c680b1ac64bca5"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>sm_type</b> { <br />
&#160;&#160;<b>SM_MAIN</b> = 0, 
<br />
&#160;&#160;<b>SM_HTTP_LONG_POLL</b>, 
<br />
&#160;&#160;<b>SM_TIME_SYNC</b>
<br />
 }<tr class="separator:abca7bdbb52f87b7733c680b1ac64bca5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:a4aad5a1453c31249d8688201537205ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4aad5a1453c31249d8688201537205ef"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>activate_states</b> { <br />
&#160;&#160;<b>AS_SEND_GET_TIMESTAMP</b> = 1, 
<br />
&#160;&#160;<b>AS_WAIT_TIMESTAMP</b>, 
<br />
&#160;&#160;<b>AS_INIT</b>, 
<br />
&#160;&#160;<b>AS_START</b>, 
<br />
&#160;&#160;<b>AS_PREPARE_ACTIVATE</b>, 
<br />
&#160;&#160;<b>AS_SEND_ACTIVATE</b>, 
<br />
&#160;&#160;<b>AS_WAIT_ACTIVATE</b>, 
<br />
&#160;&#160;<b>AS_ACTIVATED</b>
<br />
 }<tr class="separator:a4aad5a1453c31249d8688201537205ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ace0faab8cc3ec86564203d9c9c06ed1b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace0faab8cc3ec86564203d9c9c06ed1b"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>activate</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const char *vendor, const char *model, const char *sn)</td></tr>
<tr class="separator:ace0faab8cc3ec86564203d9c9c06ed1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dfc6bdb207dc01d4e6c66a6f4b8dc03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0dfc6bdb207dc01d4e6c66a6f4b8dc03"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>on_activate</b> (int32_t status, const char *cik, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:a0dfc6bdb207dc01d4e6c66a6f4b8dc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92138ea7fb3d6331f4038681f784cafa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92138ea7fb3d6331f4038681f784cafa"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>select_server_data</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, enum application_protocol_type protocol_type, enum security_mode security, char **server_name, uint16_t *server_port)</td></tr>
<tr class="separator:a92138ea7fb3d6331f4038681f784cafa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60ca897f8c1e389fd9243e23b645541a"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exosite__api_8c.html#a60ca897f8c1e389fd9243e23b645541a">create_new_sm</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const char *name, enum application_protocol_type app_type, enum sm_type type)</td></tr>
<tr class="separator:a60ca897f8c1e389fd9243e23b645541a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3205f8ee56f91f04079eddeebf659555"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3205f8ee56f91f04079eddeebf659555"></a>
static struct <a class="el" href="structprotocol__client__sm__class.html">protocol_client_sm_class</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>find_sm</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, enum sm_type type, const char *name)</td></tr>
<tr class="separator:a3205f8ee56f91f04079eddeebf659555"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac372540c9a5f248d69273a58a22834ba"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac372540c9a5f248d69273a58a22834ba"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>exo_request_args_new</b> (struct <a class="el" href="structexo__request__args.html">exo_request_args</a> **prequest, const struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:ac372540c9a5f248d69273a58a22834ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9c0a7808b75cc88e82fd9d5e7f3bbd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f9c0a7808b75cc88e82fd9d5e7f3bbd"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>exo_request_args_delete</b> (struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:a7f9c0a7808b75cc88e82fd9d5e7f3bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab378caa28aab2d7047e71263af252ca6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab378caa28aab2d7047e71263af252ca6"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>request_delete</b> (struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args, void *request, enum request_type request_type)</td></tr>
<tr class="separator:ab378caa28aab2d7047e71263af252ca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0436842a103e458d51c7b48ce9d735d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0436842a103e458d51c7b48ce9d735d3"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>exosite_api_callback</b> (void *req, void *req_args, struct <a class="el" href="structprotocol__client__response.html">protocol_client_response</a> *response)</td></tr>
<tr class="separator:a0436842a103e458d51c7b48ce9d735d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc6464a5ce51715566ed6abbf7c192c3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc6464a5ce51715566ed6abbf7c192c3"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>exo_subscribe_item_new</b> (struct <a class="el" href="structsubscribe__item.html">subscribe_item</a> **new_item, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:afc6464a5ce51715566ed6abbf7c192c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78eee434b05b518bd6aa3db3a38e633e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78eee434b05b518bd6aa3db3a38e633e"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>exo_subscribe_item_delete</b> (struct <a class="el" href="structsubscribe__item.html">subscribe_item</a> *item)</td></tr>
<tr class="separator:a78eee434b05b518bd6aa3db3a38e633e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17dcb0d46d084257e321cbea1d92c86b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17dcb0d46d084257e321cbea1d92c86b"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>add_to_subscribe_map</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:a17dcb0d46d084257e321cbea1d92c86b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a514ffa9538c2749779516886ddbc32a0"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exosite__api_8c.html#a514ffa9538c2749779516886ddbc32a0">request_queue_push</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:a514ffa9538c2749779516886ddbc32a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2127bcd3a584662dd215d7c9c8fea18"><td class="memItemLeft" align="right" valign="top">static int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exosite__api_8c.html#ae2127bcd3a584662dd215d7c9c8fea18">pcsm_transmit_qeueue_push_no_copy</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:ae2127bcd3a584662dd215d7c9c8fea18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af44f4ac9612be5ff1efb26d09f0da2ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af44f4ac9612be5ff1efb26d09f0da2ed"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>pcsm_transmit_queue_push</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:af44f4ac9612be5ff1efb26d09f0da2ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f3a5acb5ba42aed972003572eda3b3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f3a5acb5ba42aed972003572eda3b3f"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>api_get_cik</b> (char *cik, size_t len)</td></tr>
<tr class="separator:a8f3a5acb5ba42aed972003572eda3b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d52d2c2cdb7316aea39c31e4c9d1ecb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2d52d2c2cdb7316aea39c31e4c9d1ecb"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>on_timestamp</b> (int32_t status, const char *timestr, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *args)</td></tr>
<tr class="separator:a2d52d2c2cdb7316aea39c31e4c9d1ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db0c33c745e0b74ebc87e243d863d64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3db0c33c745e0b74ebc87e243d863d64"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>get_timestamp</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo)</td></tr>
<tr class="separator:a3db0c33c745e0b74ebc87e243d863d64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b63408daffa26fdf5b3705a8de3b3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1b63408daffa26fdf5b3705a8de3b3c"></a>
static BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>should_delay_activate</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo)</td></tr>
<tr class="separator:ad1b63408daffa26fdf5b3705a8de3b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96dc33d8c0ed189c3f0502b3598b1113"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96dc33d8c0ed189c3f0502b3598b1113"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>print_state_change</b> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo)</td></tr>
<tr class="separator:a96dc33d8c0ed189c3f0502b3598b1113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f400cf7ab24a50367886e93fb3a6f8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="exosite__api_8c.html#a65f400cf7ab24a50367886e93fb3a6f8">activate_sm</a> (void *obj)</td></tr>
<tr class="separator:a65f400cf7ab24a50367886e93fb3a6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga035e1a5989983f94d04e838684d2e75c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga035e1a5989983f94d04e838684d2e75c">exosite_read</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const char *alias, <a class="el" href="group___exosite___a_p_i.html#ga089a989dc1285a3594501aef49f1dd6a">exosite_on_read</a> <a class="el" href="exosite__send__http_8c.html#adf9e893b8610533b2a615f03375a3408">on_read</a>)</td></tr>
<tr class="memdesc:ga035e1a5989983f94d04e838684d2e75c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a read request to the Exosite server.  <a href="group___exosite___a_p_i.html#ga035e1a5989983f94d04e838684d2e75c">More...</a><br /></td></tr>
<tr class="separator:ga035e1a5989983f94d04e838684d2e75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8dea001937a82446e953b63abb7c9e63"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga8dea001937a82446e953b63abb7c9e63">exosite_write</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const char *alias, const char *value, <a class="el" href="group___exosite___a_p_i.html#ga84b7eddedcd3e64923683b3f3ce8dbc7">exosite_on_write</a> <a class="el" href="exosite__send__http_8c.html#a8ffc2c808eb0c212ecac8e088359eac0">on_write</a>)</td></tr>
<tr class="memdesc:ga8dea001937a82446e953b63abb7c9e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes data to the Exosite server.  <a href="group___exosite___a_p_i.html#ga8dea001937a82446e953b63abb7c9e63">More...</a><br /></td></tr>
<tr class="separator:ga8dea001937a82446e953b63abb7c9e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53581938a33faf0cffd5ede9ade8f1c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae53581938a33faf0cffd5ede9ade8f1c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>on_subscribe</b> (int32_t status, enum application_protocol_type app_type, struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *request_args, const char *value)</td></tr>
<tr class="separator:ae53581938a33faf0cffd5ede9ade8f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga245a9bf0809e30f4bf79a259ca8c9778"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga245a9bf0809e30f4bf79a259ca8c9778">exosite_subscribe</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, const char *alias, int32_t since, <a class="el" href="group___exosite___a_p_i.html#ga9d01bddd12fb83b8c9cb185a2662e8be">exosite_on_change</a> <a class="el" href="exosite__subscribe__http_8c.html#a6b8e22f298c5bf38d1396a2da5c70eac">on_change</a>)</td></tr>
<tr class="memdesc:ga245a9bf0809e30f4bf79a259ca8c9778"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe to a data source.  <a href="group___exosite___a_p_i.html#ga245a9bf0809e30f4bf79a259ca8c9778">More...</a><br /></td></tr>
<tr class="separator:ga245a9bf0809e30f4bf79a259ca8c9778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1a5c5601699db951d116d0cf7e4c38a1"><td class="memItemLeft" align="right" valign="top">enum exosite_device_status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga1a5c5601699db951d116d0cf7e4c38a1">exosite_get_status</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo)</td></tr>
<tr class="memdesc:ga1a5c5601699db951d116d0cf7e4c38a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status of the exosite object specified.  <a href="group___exosite___a_p_i.html#ga1a5c5601699db951d116d0cf7e4c38a1">More...</a><br /></td></tr>
<tr class="separator:ga1a5c5601699db951d116d0cf7e4c38a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8edb09e2a237927624249c76dbf99a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#gab8edb09e2a237927624249c76dbf99a4">exosite_delay_and_poll</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo, sys_time_t ms)</td></tr>
<tr class="memdesc:gab8edb09e2a237927624249c76dbf99a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait and call the internal state machine periodically.  <a href="group___exosite___a_p_i.html#gab8edb09e2a237927624249c76dbf99a4">More...</a><br /></td></tr>
<tr class="separator:gab8edb09e2a237927624249c76dbf99a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2681b5ce3d505b037ded36df8bab15ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga2681b5ce3d505b037ded36df8bab15ef">exosite_poll</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> *exo)</td></tr>
<tr class="memdesc:ga2681b5ce3d505b037ded36df8bab15ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the internal state machine.  <a href="group___exosite___a_p_i.html#ga2681b5ce3d505b037ded36df8bab15ef">More...</a><br /></td></tr>
<tr class="separator:ga2681b5ce3d505b037ded36df8bab15ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70278e356b752eba1ee606a725aec40b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___exosite___a_p_i.html#ga70278e356b752eba1ee606a725aec40b">exosite_new</a> (struct <a class="el" href="structexosite__class.html">exosite_class</a> **exo, const char *vendor, const char *model, const char *optional_sn, enum application_protocol_type app_type)</td></tr>
<tr class="memdesc:ga70278e356b752eba1ee606a725aec40b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an exosite object.  <a href="group___exosite___a_p_i.html#ga70278e356b752eba1ee606a725aec40b">More...</a><br /></td></tr>
<tr class="separator:ga70278e356b752eba1ee606a725aec40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c26b1fab1a6c68218d239bd2735fd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a87c26b1fab1a6c68218d239bd2735fd4"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>exosite_sdk_register_periodic_fn</b> (void(*platform_periodic_fn)(void *data), timer_data_type period)</td></tr>
<tr class="separator:a87c26b1fab1a6c68218d239bd2735fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adf30a697b0ad9976bd2a98d96f20859c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf30a697b0ad9976bd2a98d96f20859c"></a>
static const char *&#160;</td><td class="memItemRight" valign="bottom"><b>main_sm_name</b> = &quot;Main SM&quot;</td></tr>
<tr class="separator:adf30a697b0ad9976bd2a98d96f20859c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c9fb576a723ad34428a2cd39e0c384"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a98c9fb576a723ad34428a2cd39e0c384"></a>
static const char *&#160;</td><td class="memItemRight" valign="bottom"><b>long_poll_sm_name</b> = &quot;Long poll SM&quot;</td></tr>
<tr class="separator:a98c9fb576a723ad34428a2cd39e0c384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab69cb59e5331032de1383c55f0ea17de"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab69cb59e5331032de1383c55f0ea17de"></a>
static const char *&#160;</td><td class="memItemRight" valign="bottom"><b>time_sync_sm_name</b> = &quot;Time sync SM&quot;</td></tr>
<tr class="separator:ab69cb59e5331032de1383c55f0ea17de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a449f10c878b734714ff2cfd93c5d87cb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a449f10c878b734714ff2cfd93c5d87cb"></a>
static int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>gmessage_id</b> = 6</td></tr>
<tr class="separator:a449f10c878b734714ff2cfd93c5d87cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements the Exosite API calls. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Please read the Exosite Copyright: <a class="el" href="md__l_i_c_e_n_s_e.html#copyright">copyright</a></dd></dl>
<p>This module is responsible for handling all details that are Exosite Server API specific, this includes</p><ul>
<li>receiving request from the USER through the <a class="el" href="group___exosite___a_p_i.html">Exosite API</a></li>
<li>Handling Exosite API and creating abstract requests (<a class="el" href="structexo__request__args.html">exo_request_args</a>) from those calls</li>
<li>provisioning</li>
</ul>
<p>The requests are then put to queues/dictionaries depending on the request type</p><ul>
<li>The Subscribe requests are put into a subscribe dictionary</li>
<li>Every other request is put into a request queue</li>
</ul>
<p>This module implements a state machine, which does the following:</p><ul>
<li>This state machine handles the provisioning of the device.</li>
<li>Send the requests from the queues/dictionaries to the Server when the device is in Activated state</li>
</ul>
<p>This module interfaces with the <a class="el" href="group__protocol__client__sm.html">Protocol Client State-Machine interface</a>, which performs the actual send/recv to the network</p>
<p>There are 3 types of state machines that are handled by this module</p><ul>
<li>TimeSynch: It handles the time synchronization at startup</li>
<li>Long poll: needed for proper handling of subscribe over HTTP</li>
<li>Main: Everything else goes into this</li>
</ul>
<p>Since HTTP is a blocking protocol; one state machine is needed for every subscribe request over http </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a65f400cf7ab24a50367886e93fb3a6f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void activate_sm </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ul>
<li>Only send activate requests at fixed intervals (or exponential backoff)</li>
<li>Clear the underlying protocol client SMs, so that we don't get a late response (this cannot be achieved 100% for HTTP)</li>
</ul>

</div>
</div>
<a class="anchor" id="a60ca897f8c1e389fd9243e23b645541a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t create_new_sm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structexosite__class.html">exosite_class</a> *&#160;</td>
          <td class="paramname"><em>exo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum application_protocol_type&#160;</td>
          <td class="paramname"><em>app_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum sm_type&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>A state machine was created with an undefined type Check out create_new_sm calls</p>

</div>
</div>
<a class="anchor" id="ae2127bcd3a584662dd215d7c9c8fea18"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t pcsm_transmit_qeueue_push_no_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structexosite__class.html">exosite_class</a> *&#160;</td>
          <td class="paramname"><em>exo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Selects a State Machine for the <a class="el" href="structexo__request__args.html">exo_request_args</a> provided and pushes this args object to it without copying </p>
<p>Server API might not be set in the exosite object before pcsm_transmit_qeueue_push_no_copy is called</p>

</div>
</div>
<a class="anchor" id="a514ffa9538c2749779516886ddbc32a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int32_t request_queue_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structexosite__class.html">exosite_class</a> *&#160;</td>
          <td class="paramname"><em>exo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structexo__request__args.html">exo_request_args</a> *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Takes an <a class="el" href="structexo__request__args.html">exo_request_args</a> structure, copies it and pushes it on the request queue</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">exo</td><td>The exosite object; It gets the queue from there </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">args</td><td>The object to be pushed on the queueu</td></tr>
  </table>
  </dd>
</dl>
<p>If it fails it frees the copied object This function can fail if</p><ul>
<li>there is not enough memory to copy or to push onto the queue</li>
<li>if the maximum queue size is reached</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>ERR_SUCCESS on success ERR_* otherwise </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="exosite__api_8c.html">exosite_api.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
